# STEP 1: ì •ì  ì§‘ë‹¨ í”„ë¡œí•„ ìƒì„± ì‹œìŠ¤í…œ ê°€ì´ë“œ

## ğŸ“‹ ê°œìš”

ì„œìš¸ì‹œ ì¹´ë“œ ë°ì´í„°(data_2)ë¥¼ í™œìš©í•˜ì—¬ **ì—°ë ¹ëŒ€/ì„±ë³„ë³„ ì†Œë¹„ íŒ¨í„´ í”„ë¡œí•„**ì„ ìƒì„±í•˜ê³ , 
ì‚¬ìš©ìë¥¼ ì ì ˆí•œ ì§‘ë‹¨ ì„¸ê·¸ë¨¼íŠ¸ì— ë§¤ì¹­í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

## ğŸ¯ ì£¼ìš” ê¸°ëŠ¥

### 1. ì •ì  ì§‘ë‹¨ í”„ë¡œí•„ ìƒì„± (`step1_static_profile_generation.py`)

ì„œìš¸ì‹œë¯¼ì˜ ì¹´ë“œ ì†Œë¹„ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ 14ê°œì˜ ì§‘ë‹¨ ì„¸ê·¸ë¨¼íŠ¸ í”„ë¡œí•„ì„ ìƒì„±í•©ë‹ˆë‹¤.

#### ìƒì„±ë˜ëŠ” ì„¸ê·¸ë¨¼íŠ¸
- **ì—°ë ¹ëŒ€**: 7ê°œ (20ì„¸ë¯¸ë§Œ, 20ëŒ€, 30ëŒ€, 40ëŒ€, 50ëŒ€, 60ëŒ€, 70ì„¸ì´ìƒ)
- **ì„±ë³„**: 2ê°œ (ë‚¨, ì—¬)
- **ì´ ì„¸ê·¸ë¨¼íŠ¸**: 14ê°œ (7 Ã— 2)

#### ê° í”„ë¡œí•„ì— í¬í•¨ë˜ëŠ” ì •ë³´

1. **ì„¸ê·¸ë¨¼íŠ¸ ì •ë³´**
   - ì—°ë ¹ëŒ€ ê·¸ë£¹
   - ì„±ë³„
   - í”„ë¡œí•„ ID

2. **ì†Œë¹„ íŠ¹ì„±**
   - ì´ ì†Œë¹„ì•¡
   - ì´ ê±°ë˜ ê±´ìˆ˜
   - í‰ê·  ê±°ë˜ ê¸ˆì•¡
   - í™œë™ ì¼ìˆ˜

3. **ì—…ì¢…ë³„ ì„ í˜¸ë„** (TOP 10)
   - ì—…ì¢…ëª…
   - ì†Œë¹„ ê¸ˆì•¡
   - ê±°ë˜ ê±´ìˆ˜
   - ì„ í˜¸ë„ ë¹„ìœ¨
   - í‰ê·  ê±°ë˜ ê¸ˆì•¡

4. **ì§€ì—­ë³„ ì„ í˜¸ë„** (TOP 10)
   - ì§€ì—­ ì½”ë“œ
   - ì†Œë¹„ ê¸ˆì•¡
   - ë°©ë¬¸ íšŸìˆ˜

5. **ì‹œê°„ëŒ€ë³„ íŒ¨í„´**
   - ì‹œê°„ëŒ€ë³„ ì†Œë¹„ ë¹„ìœ¨
   - ì˜¤ì „/ì˜¤í›„/ì €ë…/ìƒˆë²½ íŒ¨í„´

### ì‚¬ìš© ë°©ë²•

```bash
# í”„ë¡œí•„ ìƒì„±
python3 step1_static_profile_generation.py
```

#### ì¶œë ¥ íŒŒì¼
- `outputs/step1_static_profiles.json` - ì „ì²´ í”„ë¡œí•„ ë°ì´í„°
- `outputs/step1_time_patterns.json` - ì‹œê°„ëŒ€ë³„ íŒ¨í„´
- `outputs/step1_segment_matcher.json` - ì„¸ê·¸ë¨¼íŠ¸ ë§¤ì¹­ í…Œì´ë¸”
- `outputs/step1_summary_report.md` - ìš”ì•½ ë¦¬í¬íŠ¸

---

### 2. ì‚¬ìš©ì-ì„¸ê·¸ë¨¼íŠ¸ ë§¤ì¹­ (`step1_user_matcher.py`)

ì‚¬ìš©ìì˜ ë‚˜ì´, ì„±ë³„, ì†Œë“ ì •ë³´ë¥¼ ì…ë ¥ë°›ì•„ ì ì ˆí•œ ì§‘ë‹¨ í”„ë¡œí•„ì— ë§¤ì¹­í•©ë‹ˆë‹¤.

#### ì‚¬ìš© ì˜ˆì‹œ

```python
from step1_user_matcher import UserSegmentMatcher

# ë§¤ì¹­ ì‹œìŠ¤í…œ ì´ˆê¸°í™”
matcher = UserSegmentMatcher()

# ì‚¬ìš©ì ë§¤ì¹­
profile = matcher.match_user(
    age=28,           # ë‚˜ì´
    gender='ë‚¨',      # ì„±ë³„
    income_level='ì¤‘' # ì†Œë“ ìˆ˜ì¤€ (ì €/ì¤‘/ê³ )
)

# ê²°ê³¼ í™•ì¸
print(f"ë§¤ì¹­ ì„¸ê·¸ë¨¼íŠ¸: {profile['segment_info']['age_group_kr']} {profile['segment_info']['gender_kr']}")
print(f"í‰ê·  ê±°ë˜ì•¡: {profile['spending_characteristics']['avg_transaction_amount']:,}ì›")

# ì£¼ìš” ê´€ì‹¬ ì—…ì¢… TOP 5
top_industries = matcher.get_top_industries_for_user(age=28, gender='ë‚¨', top_n=5)
for ind in top_industries:
    print(f"- {ind['industry']}: {ind['preference_ratio']:.1f}%")
```

#### ì£¼ìš” ë©”ì„œë“œ

| ë©”ì„œë“œ | ì„¤ëª… |
|--------|------|
| `match_user(age, gender, income_level)` | ì‚¬ìš©ìë¥¼ ì„¸ê·¸ë¨¼íŠ¸ì— ë§¤ì¹­ |
| `get_top_industries_for_user(age, gender, top_n)` | ì‚¬ìš©ìì˜ ì£¼ìš” ê´€ì‹¬ ì—…ì¢… ë°˜í™˜ |
| `get_region_recommendations_for_user(age, gender, top_n)` | ì‚¬ìš©ìì—ê²Œ ì¶”ì²œí•  ì§€ì—­ ë°˜í™˜ |
| `list_all_segments()` | ëª¨ë“  ì„¸ê·¸ë¨¼íŠ¸ ëª©ë¡ ë°˜í™˜ |
| `compare_segments(segment_id1, segment_id2)` | ë‘ ì„¸ê·¸ë¨¼íŠ¸ ë¹„êµ |

---

## ğŸ“Š ìƒì„±ëœ í”„ë¡œí•„ ì˜ˆì‹œ

### 30ëŒ€ ë‚¨ì„± (30s_male)

```json
{
  "segment_info": {
    "age_group": "30s",
    "age_group_kr": "30_39ì„¸",
    "gender": "male",
    "gender_kr": "ë‚¨",
    "profile_id": "30s_male"
  },
  "spending_characteristics": {
    "total_spending": 73821362556,
    "total_transactions": 2191401,
    "avg_transaction_amount": 33687,
    "active_days": 182
  },
  "industry_preferences": [
    {
      "industry": "í•œì‹",
      "spending_amount": 28281929817,
      "transaction_count": 746295,
      "avg_amount": 37886,
      "preference_ratio": 38.3,
      "rank": 1
    },
    {
      "industry": "ë³´í—˜",
      "spending_amount": 15087315920,
      "transaction_count": 55018,
      "avg_amount": 274203,
      "preference_ratio": 20.4,
      "rank": 2
    }
    // ... ë” ë§ì€ ì—…ì¢…
  ]
}
```

---

## ğŸ” ì„¸ê·¸ë¨¼íŠ¸ë³„ ì£¼ìš” íŠ¹ì§•

| ì„¸ê·¸ë¨¼íŠ¸ | ì´ ì†Œë¹„ì•¡ | í‰ê·  ê±°ë˜ì•¡ | ì£¼ìš” ê´€ì‹¬ì‚¬ |
|---------|-----------|------------|------------|
| 30ëŒ€ ë‚¨ì„± | 738ì–µì› | 33,687ì› | í•œì‹ (38.3%) |
| 40ëŒ€ ë‚¨ì„± | 671ì–µì› | 30,956ì› | ëŒ€í˜•ë§ˆíŠ¸ (55.1%) |
| 50ëŒ€ ë‚¨ì„± | 448ì–µì› | 50,771ì› | ê¸°íƒ€ì‹í’ˆ (51.7%) |
| 30ëŒ€ ì—¬ì„± | 276ì–µì› | 20,453ì› | ì»´í“¨í„°/ì†Œí”„íŠ¸ì›¨ì–´ (38.5%) |
| 20ëŒ€ ì—¬ì„± | 224ì–µì› | 30,072ì› | ZZ_ë‚˜ë¨¸ì§€ (46.4%) |
| 20ëŒ€ ë‚¨ì„± | 78ì–µì› | 9,333ì› | ê¸°íƒ€ìš”ì‹ (26.2%) |

ì „ì²´ ì„¸ê·¸ë¨¼íŠ¸ ì •ë³´ëŠ” `outputs/step1_summary_report.md`ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

---

## â° ì‹œê°„ëŒ€ë³„ ì†Œë¹„ íŒ¨í„´

ì „ì²´ ì‚¬ìš©ìì˜ ì‹œê°„ëŒ€ë³„ ì†Œë¹„ íŒ¨í„´:

| ì‹œê°„ëŒ€ | ì†Œë¹„ ë¹„ìœ¨ |
|--------|----------|
| ìƒˆë²½ (0-6ì‹œ) | 89.3% |
| ì˜¤ì „ (6-12ì‹œ) | 10.7% |
| ì˜¤í›„ (12-18ì‹œ) | - |
| ì €ë… (18-24ì‹œ) | - |

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

STEP 1ì—ì„œ ìƒì„±ëœ í”„ë¡œí•„ì€ **STEP 3 (í†µí•© ì¶”ì²œ ì‹œìŠ¤í…œ)**ì—ì„œ í™œìš©ë©ë‹ˆë‹¤.

```python
from step3_integrated_recommendation import IntegratedRecommendationSystem

# STEP 1 + STEP 2 í†µí•© ì¶”ì²œ
system = IntegratedRecommendationSystem(
    step1_dir='outputs',
    step2_file='outputs/seoul_all_gu_final.csv'  # STEP 2 ê²°ê³¼
)

# ì‚¬ìš©ì ë§ì¶¤ ì§€ì—­ ì¶”ì²œ
result = system.recommend_regions(
    age=28,
    gender='ë‚¨',
    income_level='ì¤‘',
    preferences={
        'preferred_industries': ['í•œì‹', 'ì»¤í”¼ì „ë¬¸ì '],
        'priorities': {'preference_match': 0.6, 'score': 0.4}
    },
    top_n=5
)
```

---

## ğŸ“ˆ ë°ì´í„° ì¶œì²˜

- **ì„œìš¸ì‹œ ë¹…ë°ì´í„° ìº í¼ìŠ¤**: ì„œìš¸ì‹œë¯¼ì˜ ì¼ë³„ ì¹´ë“œ ì†Œë¹„ ë°ì´í„°
  - íŒŒì¼ 1: `1.ì„œìš¸ì‹œë¯¼ì˜ ì¼ë³„ ì†Œë¹„ì§€ì—­ë³„(í–‰ì •ë™).csv`
  - íŒŒì¼ 2: `2.ì„œìš¸ì‹œë¯¼ì˜ ì¼ë³„ ì‹œê°„ëŒ€ë³„(í–‰ì •ë™).csv`
  - íŒŒì¼ 6: `6.ì„œìš¸ì‹œ ë‚´êµ­ì¸ ì„±ë³„ ì—°ë ¹ëŒ€ë³„(í–‰ì •ë™ë³„).csv` â­ ì£¼ìš” ì‚¬ìš©

- **ë°ì´í„° ê¸°ê°„**: 2024.01.01 ~ 2025.06.30
- **ì´ ë ˆì½”ë“œ**: 100,101ê°œ
- **ë¶„ì„ ì—…ì¢…**: 44ê°œ
- **ë¶„ì„ ì—°ë ¹ëŒ€**: 7ê°œ

---

## ğŸ’¡ í™œìš© ì‹œë‚˜ë¦¬ì˜¤

### 1. ì‹ ê·œ ì‚¬ìš©ì ì˜¨ë³´ë”©
```python
# ì‚¬ìš©ì ì •ë³´ ì…ë ¥
user_age = 28
user_gender = 'ë‚¨'

# ìë™ìœ¼ë¡œ ì ì ˆí•œ í”„ë¡œí•„ ë§¤ì¹­
profile = matcher.match_user(user_age, user_gender)

# ì‚¬ìš©ìì—ê²Œ ë§ì¶¤ ì¶”ì²œ ì œê³µ
print(f"ë‹¹ì‹ ê³¼ ë¹„ìŠ·í•œ {profile['segment_info']['age_group_kr']} {profile['segment_info']['gender_kr']}ëŠ”")
print(f"ì£¼ë¡œ {profile['industry_preferences'][0]['industry']}ì— ê´€ì‹¬ì´ ë§ìŠµë‹ˆë‹¤!")
```

### 2. ë§ì¶¤í˜• ê´‘ê³  íƒ€ê²ŸíŒ…
```python
# íŠ¹ì • ì„¸ê·¸ë¨¼íŠ¸ì˜ ì„ í˜¸ë„ ë¶„ì„
segment = '30s_female'
profile = matcher.profiles[segment]

# í•´ë‹¹ ì„¸ê·¸ë¨¼íŠ¸ê°€ ì„ í˜¸í•˜ëŠ” ì—…ì¢…ì— ê´‘ê³  ì§‘í–‰
for ind in profile['industry_preferences'][:5]:
    print(f"ê´‘ê³  íƒ€ê²Ÿ: {ind['industry']} (ì„ í˜¸ë„ {ind['preference_ratio']:.1f}%)")
```

### 3. ì§€ì—­ ìƒê¶Œ ë¶„ì„
```python
# íŠ¹ì • ì§€ì—­ì„ ë°©ë¬¸í•˜ëŠ” ì£¼ìš” ê³ ê°ì¸µ ë¶„ì„
for segment_id, profile in matcher.profiles.items():
    for region in profile['region_preferences'][:10]:
        if region['region_code'] == '1111051500':  # íŠ¹ì • ì§€ì—­
            print(f"{profile['segment_info']['age_group_kr']} {profile['segment_info']['gender_kr']}: "
                  f"{region['visit_count']:,}íšŒ ë°©ë¬¸")
```

---

## ğŸ”§ ì»¤ìŠ¤í„°ë§ˆì´ì§•

### ì†Œë“ ìˆ˜ì¤€ë³„ ë³´ì • ê³„ìˆ˜ ìˆ˜ì •

`step1_user_matcher.py`ì˜ `income_multipliers` ë”•ì…”ë„ˆë¦¬ë¥¼ ìˆ˜ì •í•˜ì„¸ìš”:

```python
self.income_multipliers = {
    'ì €': 0.7,   # ì €ì†Œë“ì¸µì€ í‰ê·  ê±°ë˜ì•¡ì˜ 70%
    'ì¤‘': 1.0,   # ì¤‘ì‚°ì¸µì€ í‰ê·  ê±°ë˜ì•¡ ê·¸ëŒ€ë¡œ
    'ê³ ': 1.5    # ê³ ì†Œë“ì¸µì€ í‰ê·  ê±°ë˜ì•¡ì˜ 150%
}
```

### ìƒˆë¡œìš´ ì„¸ê·¸ë¨¼íŠ¸ ì¶”ê°€

ì—°ë ¹ëŒ€ë¥¼ ë” ì„¸ë¶„í™”í•˜ë ¤ë©´ `step1_static_profile_generation.py`ì˜ `age_groups` ë”•ì…”ë„ˆë¦¬ë¥¼ ìˆ˜ì •í•˜ì„¸ìš”:

```python
self.age_groups = {
    '20ì„¸ë¯¸ë§Œ': 'teen',
    '20_24ì„¸': 'early_20s',  # ìƒˆë¡œìš´ ì„¸ê·¸ë¨¼íŠ¸
    '25_29ì„¸': 'late_20s',   # ìƒˆë¡œìš´ ì„¸ê·¸ë¨¼íŠ¸
    # ... ê¸°íƒ€
}
```

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

1. **ë°ì´í„° ì—…ë°ì´íŠ¸**: ì¹´ë“œ ë°ì´í„°ê°€ ì—…ë°ì´íŠ¸ë˜ë©´ `step1_static_profile_generation.py`ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤.

2. **íŒŒì¼ ê²½ë¡œ**: í”„ë¡œí•„ íŒŒì¼ì´ `outputs/` ë””ë ‰í† ë¦¬ì— ìˆì–´ì•¼ ë§¤ì¹­ ì‹œìŠ¤í…œì´ ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤.

3. **ë©”ëª¨ë¦¬**: ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì‹œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì— ì£¼ì˜í•˜ì„¸ìš”.

---

## ğŸ“ ë¬¸ì˜

í”„ë¡œì íŠ¸ ê´€ë ¨ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì´ìŠˆë¥¼ ë“±ë¡í•´ì£¼ì„¸ìš”.





