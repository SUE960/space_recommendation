# 슬라이드 2-6: Level 2 - 사용자-지역 매칭 ⭐ 핵심

## 사용자-지역 매칭 점수 (User-Region Matching Score)

### 🎯 **목적**
**"이 사용자에게 이 지역이 얼마나 적합한가?"**
- 사용자 특성과 지역 특성의 **유사도/적합도** 측정
- **개인화 추천의 핵심** 메커니즘
- 같은 지역도 사용자마다 다른 점수

### 💡 **핵심 개념**
```
매칭점수가 높다 = 이 사용자의 취향/특성과 잘 맞음
→ 만족도 높은 추천 가능
```

---

## 4대 매칭 지표 (0-100점)

### 👥 **1. 인구통계 매칭 (가중치 40%)** - 가장 중요!

**산출 공식:**
```
인구통계_매칭 = (연령대_매칭 × 0.8) + (성별_매칭 × 0.2)
```

**연령대 매칭 계산:**
```python
사용자_연령대 = "30대"  # 예: 35세
지역_30대_비율 = 32.0%   # 광화문 30대 비율

연령대_점수 = min(지역_해당연령대_비율 × 2, 100)
# 같은 연령대가 50% 이상이면 만점
```

**의미:**
- 비슷한 연령대가 많을수록 **공감대 형성**
- "내 나이대 사람들이 많이 가는 곳"
- 가장 직관적이고 강력한 매칭 지표

**예시:**
- 20대 학생 → 홍대(45% 20대) = 90점
- 20대 학생 → 명동(20% 20대) = 40점

---

# 슬라이드 2-7: Level 2 - 매칭 지표 상세

### 💰 **2. 소비 패턴 매칭 (가중치 35%)**

**산출 공식: 코사인 유사도**
```
소비패턴_매칭 = cosine_similarity(사용자_지출벡터, 지역_소비벡터)
```

**계산 과정:**
```python
# 사용자 지출 비율
사용자 = [식료품: 30%, 문화: 25%, 오락: 20%, 교통: 15%, ...]

# 지역 소비 비율
지역 = [식료품: 24.1%, 문화: 20.5%, 오락: 18.3%, ...]

# 벡터 유사도 계산
매칭점수 = (사용자 · 지역) / (||사용자|| × ||지역||) × 100
```

**의미:**
- 사용자의 **소비 취향**과 지역 특성 일치도
- "내가 돈 쓰는 곳이 이 지역에 많은가?"
- 높을수록 만족도 높은 경험 가능

**예시:**
- 문화·오락 선호 → 홍대(문화 20.5%, 오락 18.3%) = 85점
- 문화·오락 선호 → 강남(교육 17.5%, 교통 13.7%) = 62점

---

### 💵 **3. 소득 수준 매칭 (가중치 15%)**

**산출 로직:**
```python
소득_비율 = 사용자_소득 / 지역_평균소득

if 0.8 <= 소득_비율 <= 1.2:    # ±20% 이내
    점수 = 100                  # 완벽하게 맞음
elif 0.6 <= 소득_비율 < 0.8 or 1.2 < 소득_비율 <= 1.5:
    점수 = 70                   # 약간 차이
else:
    점수 = 40                   # 많이 차이
```

**의미:**
- 지역의 **가격대**가 사용자 소득에 적합한가?
- 너무 비싸거나 싸면 불편함
- "내 주머니 사정에 맞는가?"

**예시:**
- 월소득 250만원 → 홍대(평균 320만원) = 100점 (적절)
- 월소득 250만원 → 강남(평균 500만원) = 40점 (부담)

---

### 🏪 **4. 업종 선호 매칭 (가중치 10%)**

**산출 공식:**
```
업종_매칭 = (사용자_선호업종 ∩ 지역_특화업종) / 사용자_선호업종_수 × 100
```

**계산 예시:**
```python
사용자_선호 = ["카페", "술집", "클럽", "영화관"]
지역_특화 = ["카페", "술집", "클럽", "라이브공연"]

교집합 = ["카페", "술집", "클럽"]  # 3개 일치
매칭점수 = 3 / 4 × 100 = 75점
```

**의미:**
- "내가 좋아하는 가게가 이 지역에 많은가?"
- 특정 업종 선호 강한 사용자에게 유용

---

# 슬라이드 2-8: Level 2 - 최종 매칭 점수

### 🏆 **최종 매칭 점수 계산**

**가중평균 공식:**
```
매칭점수 = (인구통계 × 0.40) + (소비패턴 × 0.35) + (소득수준 × 0.15) + (업종선호 × 0.10)
```

**가중치 설계 이유:**

| 지표 | 가중치 | 이유 |
|------|--------|------|
| 인구통계 | 40% | 가장 **직관적이고 강력한** 매칭 요소 |
| 소비패턴 | 35% | 사용자 **취향**의 핵심 |
| 소득수준 | 15% | **가격 적정성** 중요하지만 부차적 |
| 업종선호 | 10% | 특정 사용자에게만 중요 |

---

### 📊 **실제 매칭 예시**

**20대 학생 (23세, 월 250만원) → 홍대**
```
인구통계: 90점 (45% 20대) × 0.40 = 36.0
소비패턴: 85점 (문화·오락 강함) × 0.35 = 29.8
소득수준: 100점 (320만원 평균) × 0.15 = 15.0
업종선호: 75점 (카페·술집 많음) × 0.10 = 7.5
──────────────────────────────────
최종 매칭점수: 88.3점 ← 매우 높음!
```

**20대 학생 (23세, 월 250만원) → 강남**
```
인구통계: 50점 (25% 20대) × 0.40 = 20.0
소비패턴: 62점 (교육·교통 중심) × 0.35 = 21.7
소득수준: 40점 (500만원 평균) × 0.15 = 6.0
업종선호: 50점 (학원·업무 중심) × 0.10 = 5.0
──────────────────────────────────
최종 매칭점수: 52.7점 ← 낮음
```

---

# 슬라이드 2-9: 최종 추천 점수 계산 ⭐⭐⭐

## Level 1 × Level 2 = 최종 추천

### 🎯 **최종 추천 점수 공식**

```
최종_추천_점수 = (지역_품질_점수 / 100) × 매칭_점수
```

**왜 곱셈인가?**
- 두 요소 **모두 중요**하기 때문
- 하나라도 낮으면 추천 부적절

---

### 💡 **실제 계산 예시**

#### **Case 1: 20대 학생 → 홍대**
```
Level 1 (지역 품질): 87.6점  ← 우량 상권
Level 2 (매칭도): 86.6점     ← 매우 잘 맞음

최종 점수 = (87.6 / 100) × 86.6 = 75.9점
```
**해석:** 지역도 좋고, 사용자와도 잘 맞음 → **강력 추천!**

---

#### **Case 2: 20대 학생 → 강남**
```
Level 1 (지역 품질): 91.5점  ← 초우량 상권 (최고!)
Level 2 (매칭도): 63.0점     ← 잘 안 맞음

최종 점수 = (91.5 / 100) × 63.0 = 57.6점
```
**해석:** 지역은 최고지만, 사용자와 안 맞음 → **보통 추천**

---

#### **Case 3: 60대 관광객 → 명동**
```
Level 1 (지역 품질): 89.3점  ← 초우량 상권
Level 2 (매칭도): 71.5점     ← 잘 맞음

최종 점수 = (89.3 / 100) × 71.5 = 63.9점
```
**해석:** 지역도 좋고, 60대 쇼핑에 적합 → **추천**

---

### 📊 **전체 비교표**

| 사용자 | 지역 | 지역품질(L1) | 매칭도(L2) | **최종점수** | 순위 |
|--------|------|:------------:|:----------:|:------------:|:----:|
| 20대 학생 | 홍대 | 87.6 | 86.6 | **75.9** | 🥇 1위 |
| 20대 학생 | 강남 | 91.5 | 63.0 | 57.6 | 2위 |
| 20대 학생 | 명동 | 89.3 | 54.6 | 48.8 | 3위 |
| | | | | | |
| 40대 직장인 | 강남 | 91.5 | 74.3 | **68.0** | 🥇 1위 |
| 40대 직장인 | 명동 | 89.3 | 59.9 | 53.5 | 2위 |
| 40대 직장인 | 홍대 | 87.6 | 56.6 | 49.6 | 3위 |
| | | | | | |
| 60대 관광객 | 명동 | 89.3 | 71.5 | **63.9** | 🥇 1위 |
| 60대 관광객 | 강남 | 91.5 | 57.9 | 53.0 | 2위 |
| 60대 관광객 | 홍대 | 87.6 | 50.4 | 44.2 | 3위 |

**핵심 발견:**
- 같은 지역도 사용자마다 **순위가 완전히 다름**!
- 강남은 품질 최고(91.5)지만 모두에게 1위는 아님
- **개인화 추천**이 작동하고 있음 ✅

