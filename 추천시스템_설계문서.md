# í†µí•© ì¶”ì²œ ì‹œìŠ¤í…œ ì„¤ê³„ ë¬¸ì„œ

## ğŸ“‹ ê°œìš”

ë³¸ ë¬¸ì„œëŠ” **ì‹¤ì‹œê°„ ì§€ì—­ í”„ë¡œí•„**ê³¼ **ì •ì  ì§‘ë‹¨ í”„ë¡œí•„**ì„ ëª¨ë‘ í™œìš©í•œ í†µí•© ì¶”ì²œ ì‹œìŠ¤í…œì˜ ì„¤ê³„ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.

### ë°ì´í„° ì†ŒìŠ¤

1. **API (ì‹¤ì‹œê°„ ì§€ì—­ í”„ë¡œí•„)**
   - ì ìˆ˜ ê³µì‹: `ìƒì—… í™œì„±ë„ (40%) + íŠ¹í™”ì ìˆ˜ (30%) + ì¸êµ¬í†µê³„ (30%)`
   - ë°ì´í„°: ì„œìš¸ì‹œ ìƒê¶Œ í™œì„±í™” ì •ë³´ API
   - íŠ¹ì§•: ì‹¤ì‹œê°„ ìƒê¶Œ ìƒíƒœ, ì—…ì¢… íŠ¹í™”ë„, ì¸êµ¬ í†µê³„

2. **data_2 (ì •ì  ì§‘ë‹¨ í”„ë¡œí•„)**
   - ë°ì´í„°: ì„œìš¸ì‹œë¯¼ ì¹´ë“œ ì†Œë¹„ ë°ì´í„° (547ì¼ê°„)
   - íŠ¹ì§•: ì—°ë ¹ëŒ€/ì„±ë³„/ì†Œë“ë³„ ì†Œë¹„ íŒ¨í„´, ì—…ì¢… ì„ í˜¸ë„, ì‹œê°„ëŒ€ë³„ íŒ¨í„´

---

## 1ï¸âƒ£ ì‚¬ìš©ì ì…ë ¥ ì„¤ê³„

### 1.1 í•„ìˆ˜ ì…ë ¥ í•­ëª©

#### ê¸°ë³¸ ì¸êµ¬í†µê³„ ì •ë³´ (ì •ì  í”„ë¡œí•„ ë§¤ì¹­ìš©)
```json
{
  "age": 28,                    // ë‚˜ì´ (ì •ìˆ˜)
  "gender": "ë‚¨",              // ì„±ë³„: "ë‚¨" | "ì—¬"
  "income_level": "ì¤‘"          // ì†Œë“ ìˆ˜ì¤€: "ì €" | "ì¤‘" | "ê³ "
}
```

**ìš©ë„**: 
- `step1_user_matcher.py`ë¥¼ í†µí•´ ì •ì  ì§‘ë‹¨ í”„ë¡œí•„ì— ë§¤ì¹­
- í•´ë‹¹ ì„¸ê·¸ë¨¼íŠ¸ì˜ ì†Œë¹„ íŒ¨í„´, ì—…ì¢… ì„ í˜¸ë„, ì‹œê°„ëŒ€ íŒ¨í„´ ì¶”ì¶œ

---

#### ì‹¤ì‹œê°„ ì„ í˜¸ë„ ì •ë³´ (ì‹¤ì‹œê°„ í”„ë¡œí•„ ë§¤ì¹­ìš©)
```json
{
  "preferred_industries": ["í•œì‹", "ì¹´í˜", "ì˜í™”ê´€"],  // ì„ í˜¸ ì—…ì¢… (ë‹¤ì¤‘ ì„ íƒ ê°€ëŠ¥)
  "time_period": "ì €ë…",        // ì‹œê°„ëŒ€: "ì˜¤ì „" | "ì˜¤í›„" | "ì €ë…" | "ìƒˆë²½"
  "is_weekend": false,          // ì£¼ë§ ì—¬ë¶€ (boolean)
  "preference_type": "í™œë°œí•œ"   // ì„ í˜¸ ì§€ì—­ íŠ¹ì„±: "í™œë°œí•œ" | "ì•ˆì •ì ì¸" | "íŠ¹í™”ëœ"
}
```

**ìš©ë„**:
- ì‹¤ì‹œê°„ ì§€ì—­ í”„ë¡œí•„ì˜ íŠ¹í™” ì—…ì¢…ê³¼ ë§¤ì¹­
- ì‹œê°„ëŒ€ë³„ í™œì„±ë„ ê³ ë ¤
- ì§€ì—­ íŠ¹ì„± ì„ í˜¸ë„ ë°˜ì˜

---

### 1.2 ì„ íƒ ì…ë ¥ í•­ëª©

```json
{
  "location_preference": {      // ìœ„ì¹˜ ì„ í˜¸ë„ (ì„ íƒ)
    "gu": "ê°•ë‚¨êµ¬",             // ì„ í˜¸ êµ¬ (ì„ íƒ)
    "max_distance": 5           // ìµœëŒ€ ê±°ë¦¬ (km, ì„ íƒ)
  },
  "budget_range": {             // ì˜ˆì‚° ë²”ìœ„ (ì„ íƒ)
    "min": 10000,
    "max": 50000
  },
  "exclude_areas": []           // ì œì™¸í•  ì§€ì—­ ëª©ë¡ (ì„ íƒ)
}
```

---

### 1.3 ì „ì²´ ì…ë ¥ ìŠ¤í‚¤ë§ˆ

```python
class RecommendationRequest(BaseModel):
    # í•„ìˆ˜: ê¸°ë³¸ ì¸êµ¬í†µê³„
    age: int                    # ë‚˜ì´
    gender: str                 # ì„±ë³„: "ë‚¨" | "ì—¬"
    income_level: str           # ì†Œë“: "ì €" | "ì¤‘" | "ê³ "
    
    # í•„ìˆ˜: ì‹¤ì‹œê°„ ì„ í˜¸ë„
    preferred_industries: List[str]  # ì„ í˜¸ ì—…ì¢… ë¦¬ìŠ¤íŠ¸
    time_period: str            # ì‹œê°„ëŒ€
    is_weekend: bool            # ì£¼ë§ ì—¬ë¶€
    preference_type: str        # ì§€ì—­ íŠ¹ì„± ì„ í˜¸
    
    # ì„ íƒ: ì¶”ê°€ ì„ í˜¸ë„
    location_preference: Optional[Dict] = None
    budget_range: Optional[Dict] = None
    exclude_areas: Optional[List[str]] = None
```

---

## 2ï¸âƒ£ ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜ ì„¤ê³„

### 2.1 ì „ì²´ í”„ë¡œì„¸ìŠ¤ íë¦„

```
[ì‚¬ìš©ì ì…ë ¥]
    â†“
[1ë‹¨ê³„: ì •ì  í”„ë¡œí•„ ë§¤ì¹­]
    â†“
[2ë‹¨ê³„: ì‹¤ì‹œê°„ ì§€ì—­ í”„ë¡œí•„ ë¡œë“œ]
    â†“
[3ë‹¨ê³„: ì´ì¤‘ ë§¤ì¹­ ì ìˆ˜ ê³„ì‚°]
    â†“
[4ë‹¨ê³„: ìµœì¢… ì¶”ì²œ ì ìˆ˜ ì‚°ì¶œ]
    â†“
[5ë‹¨ê³„: ì¶”ì²œ ê²°ê³¼ ë°˜í™˜]
```

---

### 2.2 ë‹¨ê³„ë³„ ìƒì„¸ ì„¤ëª…

#### **1ë‹¨ê³„: ì •ì  ì§‘ë‹¨ í”„ë¡œí•„ ë§¤ì¹­**

**ì…ë ¥**: `age`, `gender`, `income_level`

**ì²˜ë¦¬**:
```python
# step1_user_matcher.py ì‚¬ìš©
matcher = UserSegmentMatcher()
static_profile = matcher.match_user(
    age=user_input['age'],
    gender=user_input['gender'],
    income_level=user_input['income_level']
)
```

**ì¶œë ¥ (ì •ì  í”„ë¡œí•„)**:
```json
{
  "segment_id": "30s_male",
  "industry_preferences": [
    {"industry": "í•œì‹", "preference_ratio": 30.1},
    {"industry": "ë³´í—˜", "preference_ratio": 14.8},
    ...
  ],
  "spending_characteristics": {
    "avg_transaction_amount": 33687,
    "total_spending": 73821362556
  },
  "time_patterns": {
    "period_summary": [
      {"period": "ì˜¤í›„", "spending_ratio": 45.2},
      ...
    ]
  }
}
```

**í™œìš© ë°ì´í„°**:
- ì—…ì¢… ì„ í˜¸ë„ ë¦¬ìŠ¤íŠ¸ (`industry_preferences`)
- í‰ê·  ê±°ë˜ ê¸ˆì•¡ (`avg_transaction_amount`)
- ì‹œê°„ëŒ€ë³„ ì†Œë¹„ íŒ¨í„´ (`time_patterns`)

---

#### **2ë‹¨ê³„: ì‹¤ì‹œê°„ ì§€ì—­ í”„ë¡œí•„ ë¡œë“œ**

**ì…ë ¥**: APIì—ì„œ ëª¨ë“  í•«ìŠ¤íŒŸ ì§€ì—­ ë°ì´í„° ë¡œë“œ

**ì²˜ë¦¬**:
```python
# analyze_realtime_profiles.py ë˜ëŠ” APIì—ì„œ ë¡œë“œ
realtime_profiles = load_realtime_profiles()
# ê° ì§€ì—­ë³„ë¡œ:
# - ìƒì—… í™œì„±ë„ ì ìˆ˜ (40%)
# - íŠ¹í™”ì ìˆ˜ (30%)
# - ì¸êµ¬í†µê³„ ì ìˆ˜ (30%)
# - ì¢…í•© ì ìˆ˜ = (í™œì„±ë„ Ã— 0.4) + (íŠ¹í™” Ã— 0.3) + (ì¸êµ¬í†µê³„ Ã— 0.3)
```

**ì¶œë ¥ (ì‹¤ì‹œê°„ í”„ë¡œí•„)**:
```json
{
  "area_nm": "ê°•ë‚¨ì—­",
  "comprehensive_score": 85.3,
  "components": {
    "activity": 92.5,      // ìƒì—… í™œì„±ë„
    "specialization": 88.7, // íŠ¹í™”ì ìˆ˜
    "demographic": 74.5     // ì¸êµ¬í†µê³„
  },
  "specialized_industries": ["ë ˆìŠ¤í† ë‘", "ì¹´í˜", "í•™ì›"],
  "top_industry": {
    "name": "ë ˆìŠ¤í† ë‘",
    "ratio": 35.2
  }
}
```

**í™œìš© ë°ì´í„°**:
- ì¢…í•© ì ìˆ˜ (`comprehensive_score`)
- íŠ¹í™” ì—…ì¢… ë¦¬ìŠ¤íŠ¸ (`specialized_industries`)
- ìƒì—… í™œì„±ë„, íŠ¹í™”ë„, ì¸êµ¬í†µê³„ ì„¸ë¶€ ì ìˆ˜

---

#### **3ë‹¨ê³„: ì´ì¤‘ ë§¤ì¹­ ì ìˆ˜ ê³„ì‚°**

ë‘ ê°€ì§€ ë§¤ì¹­ ì ìˆ˜ë¥¼ ê°ê° ê³„ì‚°í•©ë‹ˆë‹¤.

##### **3-1. ì •ì  í”„ë¡œí•„ ë§¤ì¹­ ì ìˆ˜ (Static Matching Score)**

**ëª©ì **: ì‚¬ìš©ìì˜ ì§‘ë‹¨ íŠ¹ì„±ê³¼ ì§€ì—­ì˜ ì¸êµ¬í†µê³„/ì†Œë¹„ íŒ¨í„´ ë§¤ì¹­

**ê³„ì‚° ê³µì‹**:
```python
static_matching_score = (
    industry_match_score * 0.40 +      # ì—…ì¢… ì„ í˜¸ë„ ë§¤ì¹­ (40%)
    demographic_match_score * 0.30 +   # ì¸êµ¬í†µê³„ ë§¤ì¹­ (30%)
    spending_match_score * 0.20 +      # ì†Œë¹„ ìˆ˜ì¤€ ë§¤ì¹­ (20%)
    time_pattern_match_score * 0.10    # ì‹œê°„ëŒ€ íŒ¨í„´ ë§¤ì¹­ (10%)
)
```

**ì„¸ë¶€ ê³„ì‚°**:

1. **ì—…ì¢… ì„ í˜¸ë„ ë§¤ì¹­ (40%)**
   ```python
   # ì •ì  í”„ë¡œí•„ì˜ ìƒìœ„ ì—…ì¢…ê³¼ ì‹¤ì‹œê°„ í”„ë¡œí•„ì˜ íŠ¹í™” ì—…ì¢… êµì§‘í•©
   static_industries = set([i['industry'] for i in static_profile['industry_preferences'][:5]])
   realtime_industries = set(realtime_profile['specialized_industries'])
   
   common_industries = static_industries & realtime_industries
   
   # ë§¤ì¹­ ì ìˆ˜ = (êµì§‘í•© ìˆ˜ / ì •ì  í”„ë¡œí•„ ì—…ì¢… ìˆ˜) Ã— 100
   industry_match_score = (len(common_industries) / len(static_industries)) * 100
   ```

2. **ì¸êµ¬í†µê³„ ë§¤ì¹­ (30%)**
   ```python
   # ì‹¤ì‹œê°„ í”„ë¡œí•„ì˜ ì¸êµ¬í†µê³„ ì ìˆ˜ í™œìš©
   # ì‚¬ìš©ì ì—°ë ¹ëŒ€ê°€ í•´ë‹¹ ì§€ì—­ ì£¼ìš” ì—°ë ¹ëŒ€ì™€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸
   # (ì‹¤ì‹œê°„ í”„ë¡œí•„ì˜ demographic_scoreë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê³„ì‚°)
   demographic_match_score = realtime_profile['components']['demographic']
   ```

3. **ì†Œë¹„ ìˆ˜ì¤€ ë§¤ì¹­ (20%)**
   ```python
   # ì •ì  í”„ë¡œí•„ì˜ í‰ê·  ê±°ë˜ì•¡ê³¼ ì§€ì—­ì˜ ì†Œë¹„ ìˆ˜ì¤€ ë¹„êµ
   user_avg_spending = static_profile['spending_characteristics']['avg_transaction_amount']
   area_activity = realtime_profile['components']['activity']
   
   # í™œë™ë„ê°€ ë†’ì€ ì§€ì—­ = ì†Œë¹„ ìˆ˜ì¤€ì´ ë†’ì€ ì§€ì—­ìœ¼ë¡œ ê°€ì •
   # ì •ê·œí™”í•˜ì—¬ ë§¤ì¹­ ì ìˆ˜ ê³„ì‚°
   spending_match_score = min(area_activity, 100)
   ```

4. **ì‹œê°„ëŒ€ íŒ¨í„´ ë§¤ì¹­ (10%)**
   ```python
   # ì •ì  í”„ë¡œí•„ì˜ ì‹œê°„ëŒ€ë³„ ì†Œë¹„ íŒ¨í„´ê³¼ ì‚¬ìš©ì ì…ë ¥ ì‹œê°„ëŒ€ ë§¤ì¹­
   time_patterns = static_profile['time_patterns']['period_summary']
   user_time_period = user_input['time_period']
   
   # í•´ë‹¹ ì‹œê°„ëŒ€ì˜ ì†Œë¹„ ë¹„ìœ¨ ì¶”ì¶œ
   time_ratio = next(
       (t['spending_ratio'] for t in time_patterns if t['period'] == user_time_period),
       0
   )
   time_pattern_match_score = time_ratio
   ```

---

##### **3-2. ì‹¤ì‹œê°„ í”„ë¡œí•„ ë§¤ì¹­ ì ìˆ˜ (Realtime Matching Score)**

**ëª©ì **: ì‚¬ìš©ìì˜ ì‹¤ì‹œê°„ ì„ í˜¸ë„ì™€ ì§€ì—­ì˜ í˜„ì¬ ìƒíƒœ ë§¤ì¹­

**ê³„ì‚° ê³µì‹**:
```python
realtime_matching_score = (
    user_industry_match * 0.35 +      # ì‚¬ìš©ì ì„ í˜¸ ì—…ì¢… ë§¤ì¹­ (35%)
    realtime_comprehensive_score * 0.30 +  # ì‹¤ì‹œê°„ ì¢…í•© ì ìˆ˜ (30%)
    specialization_match * 0.20 +     # íŠ¹í™”ë„ ë§¤ì¹­ (20%)
    time_period_match * 0.15           # ì‹œê°„ëŒ€ ì í•©ë„ (15%)
)
```

**ì„¸ë¶€ ê³„ì‚°**:

1. **ì‚¬ìš©ì ì„ í˜¸ ì—…ì¢… ë§¤ì¹­ (35%)**
   ```python
   # ì‚¬ìš©ìê°€ ì§ì ‘ ì„ íƒí•œ ì„ í˜¸ ì—…ì¢…ê³¼ ì§€ì—­ íŠ¹í™” ì—…ì¢… ë§¤ì¹­
   user_preferred = set(user_input['preferred_industries'])
   area_specialized = set(realtime_profile['specialized_industries'])
   
   common = user_preferred & area_specialized
   user_industry_match = (len(common) / max(len(user_preferred), 1)) * 100
   ```

2. **ì‹¤ì‹œê°„ ì¢…í•© ì ìˆ˜ (30%)**
   ```python
   # ì‹¤ì‹œê°„ ì§€ì—­ í”„ë¡œí•„ì˜ ì¢…í•© ì ìˆ˜ ì§ì ‘ í™œìš©
   realtime_comprehensive_score = realtime_profile['comprehensive_score']
   ```

3. **íŠ¹í™”ë„ ë§¤ì¹­ (20%)**
   ```python
   # ì§€ì—­ì˜ íŠ¹í™” ì •ë„ê°€ ì‚¬ìš©ì ì„ í˜¸ì™€ ì¼ì¹˜í•˜ëŠ”ì§€
   specialization_score = realtime_profile['components']['specialization']
   
   if user_input['preference_type'] == 'íŠ¹í™”ëœ':
       specialization_match = specialization_score
   elif user_input['preference_type'] == 'í™œë°œí•œ':
       # íŠ¹í™”ë„ê°€ ë„ˆë¬´ ë†’ìœ¼ë©´ ì˜¤íˆë ¤ ê°ì  (ë‹¤ì–‘ì„± ì„ í˜¸)
       specialization_match = 100 - abs(specialization_score - 50)
   else:  # ì•ˆì •ì ì¸
       # íŠ¹í™”ë„ê°€ ì¤‘ê°„ ì •ë„ë©´ ë†’ì€ ì ìˆ˜
       specialization_match = 100 - abs(specialization_score - 40)
   ```

4. **ì‹œê°„ëŒ€ ì í•©ë„ (15%)**
   ```python
   # ì£¼ë§ ì—¬ë¶€ì™€ ì‹œê°„ëŒ€ì— ë”°ë¥¸ ë³´ë„ˆìŠ¤
   time_period_match = 70  # ê¸°ë³¸ ì ìˆ˜
   
   if user_input['is_weekend']:
       # ì£¼ë§ì—ëŠ” í™œì„±ë„ê°€ ë†’ì€ ì§€ì—­ì— ë³´ë„ˆìŠ¤
       if realtime_profile['components']['activity'] > 80:
           time_period_match = 100
   else:
       # í‰ì¼ì—ëŠ” ì•ˆì •ì ì¸ ì§€ì—­ì— ë³´ë„ˆìŠ¤
       if realtime_profile['components']['activity'] < 60:
           time_period_match = 90
   ```

---

#### **4ë‹¨ê³„: ìµœì¢… ì¶”ì²œ ì ìˆ˜ ì‚°ì¶œ**

**ëª©ì **: ì •ì  ë§¤ì¹­ ì ìˆ˜ì™€ ì‹¤ì‹œê°„ ë§¤ì¹­ ì ìˆ˜ë¥¼ ê²°í•©í•˜ì—¬ ìµœì¢… ì ìˆ˜ ê³„ì‚°

**ê³„ì‚° ê³µì‹**:
```python
final_recommendation_score = (
    static_matching_score * 0.50 +     # ì •ì  í”„ë¡œí•„ ë§¤ì¹­ (50%)
    realtime_matching_score * 0.50    # ì‹¤ì‹œê°„ í”„ë¡œí•„ ë§¤ì¹­ (50%)
)
```

**ê°€ì¤‘ì¹˜ ì„¤ëª…**:
- **ì •ì  í”„ë¡œí•„ 50%**: ì‚¬ìš©ìì˜ ì¥ê¸°ì  ì†Œë¹„ íŒ¨í„´ê³¼ ì§‘ë‹¨ íŠ¹ì„± ë°˜ì˜
- **ì‹¤ì‹œê°„ í”„ë¡œí•„ 50%**: í˜„ì¬ ì§€ì—­ ìƒíƒœì™€ ì‚¬ìš©ìì˜ ì¦‰ê°ì  ì„ í˜¸ë„ ë°˜ì˜

**ì¶”ê°€ ë³´ì • ìš”ì†Œ**:
```python
# 1. ì£¼ë§ ë³´ë„ˆìŠ¤
if user_input['is_weekend']:
    final_score *= 1.1  # 10% ë³´ë„ˆìŠ¤

# 2. ì˜ˆì‚° ë²”ìœ„ ë§¤ì¹­ (ì„ íƒ ì…ë ¥ì´ ìˆëŠ” ê²½ìš°)
if user_input.get('budget_range'):
    # ì§€ì—­ì˜ í‰ê·  ê±°ë˜ì•¡ê³¼ ì‚¬ìš©ì ì˜ˆì‚° ë²”ìœ„ ë¹„êµ
    if area_avg_spending in budget_range:
        final_score *= 1.05  # 5% ë³´ë„ˆìŠ¤

# 3. ìœ„ì¹˜ ì„ í˜¸ë„ (ì„ íƒ ì…ë ¥ì´ ìˆëŠ” ê²½ìš°)
if user_input.get('location_preference'):
    # ì„ í˜¸ êµ¬ì™€ì˜ ê±°ë¦¬ ê³„ì‚°í•˜ì—¬ ë³´ì •
    distance_penalty = calculate_distance_penalty(...)
    final_score *= (1 - distance_penalty)
```

---

#### **5ë‹¨ê³„: ì¶”ì²œ ê²°ê³¼ ë°˜í™˜**

**ì¶œë ¥ í˜•ì‹**:
```json
{
  "recommendations": [
    {
      "region": "ê°•ë‚¨ì—­",
      "final_score": 87.5,
      "breakdown": {
        "static_matching": 85.2,
        "realtime_matching": 89.8
      },
      "static_match_details": {
        "industry_match": 90.0,
        "demographic_match": 74.5,
        "spending_match": 88.0,
        "time_pattern_match": 75.3
      },
      "realtime_match_details": {
        "user_industry_match": 100.0,
        "comprehensive_score": 85.3,
        "specialization_match": 88.7,
        "time_period_match": 100.0
      },
      "reasons": [
        "ë‹¹ì‹ ì˜ ì„ í˜¸ ì—…ì¢…(í•œì‹, ì¹´í˜)ì´ íŠ¹í™”ëœ ì§€ì—­",
        "30ëŒ€ ë‚¨ì„± ì§‘ë‹¨ì˜ ì£¼ìš” ë°©ë¬¸ ì§€ì—­",
        "í˜„ì¬ ë§¤ìš° í™œì„±í™”ëœ ìƒê¶Œ (Hot Zone)",
        "ì €ë… ì‹œê°„ëŒ€ì— ì í•©í•œ ì§€ì—­"
      ],
      "realtime_profile": {
        "comprehensive_score": 85.3,
        "grade": "ë§¤ìš° í™œì„±í™” (Hot Zone)",
        "specialized_industries": ["ë ˆìŠ¤í† ë‘", "ì¹´í˜", "í•™ì›"]
      }
    },
    ...
  ],
  "user_profile": {
    "matched_segment": "30s_male",
    "static_profile_summary": {
      "top_industries": ["í•œì‹", "ë³´í—˜", "ì•ˆë§ˆ/ë§ˆì‚¬ì§€"],
      "avg_transaction": 33687
    },
    "input_preferences": {
      "preferred_industries": ["í•œì‹", "ì¹´í˜"],
      "time_period": "ì €ë…"
    }
  }
}
```

---

## 3ï¸âƒ£ ë°ì´í„° í™œìš© ìš”ì•½

### 3.1 ì •ì  ì§‘ë‹¨ í”„ë¡œí•„ (data_2) í™œìš©

| ë°ì´í„° í•­ëª© | í™œìš© ëª©ì  | ê°€ì¤‘ì¹˜ |
|------------|---------|--------|
| `industry_preferences` | ì—…ì¢… ì„ í˜¸ë„ ë§¤ì¹­ | 40% |
| `spending_characteristics.avg_transaction_amount` | ì†Œë¹„ ìˆ˜ì¤€ ë§¤ì¹­ | 20% |
| `time_patterns` | ì‹œê°„ëŒ€ íŒ¨í„´ ë§¤ì¹­ | 10% |
| ì¸êµ¬í†µê³„ ì •ë³´ (ê°„ì ‘) | ì¸êµ¬í†µê³„ ë§¤ì¹­ | 30% |

**ì´ ê¸°ì—¬ë„**: ìµœì¢… ì ìˆ˜ì˜ **50%**

---

### 3.2 ì‹¤ì‹œê°„ ì§€ì—­ í”„ë¡œí•„ (API) í™œìš©

| ë°ì´í„° í•­ëª© | í™œìš© ëª©ì  | ê°€ì¤‘ì¹˜ |
|------------|---------|--------|
| `comprehensive_score` | ì§€ì—­ ì¢…í•© í‰ê°€ | 30% |
| `specialized_industries` | ì‚¬ìš©ì ì„ í˜¸ ì—…ì¢… ë§¤ì¹­ | 35% |
| `components.specialization` | íŠ¹í™”ë„ ë§¤ì¹­ | 20% |
| `components.activity` | ì‹œê°„ëŒ€ ì í•©ë„ | 15% |

**ì´ ê¸°ì—¬ë„**: ìµœì¢… ì ìˆ˜ì˜ **50%**

---

## 4ï¸âƒ£ ì•Œê³ ë¦¬ì¦˜ íŠ¹ì§•

### 4.1 ì´ì¤‘ í”„ë¡œí•„ í™œìš©
- **ì •ì  í”„ë¡œí•„**: ì‚¬ìš©ìì˜ ì¥ê¸°ì  ì†Œë¹„ íŒ¨í„´ê³¼ ì§‘ë‹¨ íŠ¹ì„± ë°˜ì˜
- **ì‹¤ì‹œê°„ í”„ë¡œí•„**: í˜„ì¬ ì§€ì—­ ìƒíƒœì™€ ì¦‰ê°ì  ì„ í˜¸ë„ ë°˜ì˜

### 4.2 ê· í˜•ì¡íŒ ê°€ì¤‘ì¹˜
- ì •ì /ì‹¤ì‹œê°„ ê° 50%ë¡œ ê· í˜• ìœ ì§€
- ì„¸ë¶€ í•­ëª©ë³„ ê°€ì¤‘ì¹˜ë¡œ ì„¸ë°€í•œ ë§¤ì¹­

### 4.3 ìœ ì—°í•œ ì…ë ¥
- í•„ìˆ˜ ì…ë ¥ë§Œìœ¼ë¡œë„ ê¸°ë³¸ ì¶”ì²œ ê°€ëŠ¥
- ì„ íƒ ì…ë ¥ìœ¼ë¡œ ë” ì •êµí•œ ì¶”ì²œ ê°€ëŠ¥

### 4.4 ì„¤ëª… ê°€ëŠ¥í•œ ì¶”ì²œ
- ê° ë§¤ì¹­ ì ìˆ˜ì˜ ì„¸ë¶€ ë‚´ì—­ ì œê³µ
- ì¶”ì²œ ì´ìœ ë¥¼ ëª…í™•íˆ ì œì‹œ

---

## 5ï¸âƒ£ êµ¬í˜„ ì˜ˆì‹œ ì½”ë“œ êµ¬ì¡°

```python
class IntegratedRecommendationSystem:
    def __init__(self):
        self.static_matcher = UserSegmentMatcher()
        self.realtime_profiles = load_realtime_profiles()
    
    def recommend(self, user_input: RecommendationRequest):
        # 1. ì •ì  í”„ë¡œí•„ ë§¤ì¹­
        static_profile = self.static_matcher.match_user(
            age=user_input.age,
            gender=user_input.gender,
            income_level=user_input.income_level
        )
        
        # 2. ëª¨ë“  ì§€ì—­ì— ëŒ€í•´ ì ìˆ˜ ê³„ì‚°
        recommendations = []
        for area_name, realtime_profile in self.realtime_profiles.items():
            # 3. ì •ì  ë§¤ì¹­ ì ìˆ˜ ê³„ì‚°
            static_score = self.calculate_static_matching(
                static_profile, realtime_profile
            )
            
            # 4. ì‹¤ì‹œê°„ ë§¤ì¹­ ì ìˆ˜ ê³„ì‚°
            realtime_score = self.calculate_realtime_matching(
                user_input, realtime_profile
            )
            
            # 5. ìµœì¢… ì ìˆ˜ ê³„ì‚°
            final_score = (static_score * 0.5) + (realtime_score * 0.5)
            
            recommendations.append({
                'region': area_name,
                'final_score': final_score,
                'static_score': static_score,
                'realtime_score': realtime_score,
                ...
            })
        
        # 6. ì •ë ¬ ë° ë°˜í™˜
        recommendations.sort(key=lambda x: x['final_score'], reverse=True)
        return recommendations[:10]
```

---

## 6ï¸âƒ£ í–¥í›„ ê°œì„  ë°©í–¥

1. **ë¨¸ì‹ ëŸ¬ë‹ ê¸°ë°˜ ê°€ì¤‘ì¹˜ ì¡°ì •**
   - ì‚¬ìš©ì í”¼ë“œë°±ì„ í†µí•œ ê°€ì¤‘ì¹˜ ìµœì í™”

2. **ì½œë“œ ìŠ¤íƒ€íŠ¸ ë¬¸ì œ í•´ê²°**
   - ì‹ ê·œ ì‚¬ìš©ìë¥¼ ìœ„í•œ ê¸°ë³¸ í”„ë¡œí•„ ì œê³µ

3. **ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸**
   - ì§€ì—­ í”„ë¡œí•„ì˜ ì£¼ê¸°ì  ê°±ì‹ 

4. **ê°œì¸í™” ê°•í™”**
   - ì‚¬ìš©ìë³„ ê°€ì¤‘ì¹˜ ì»¤ìŠ¤í„°ë§ˆì´ì§•

---

## ğŸ“ ìš”ì•½

### ì‚¬ìš©ì ì…ë ¥
- **í•„ìˆ˜**: ë‚˜ì´, ì„±ë³„, ì†Œë“ ìˆ˜ì¤€, ì„ í˜¸ ì—…ì¢…, ì‹œê°„ëŒ€, ì£¼ë§ ì—¬ë¶€, ì§€ì—­ íŠ¹ì„± ì„ í˜¸
- **ì„ íƒ**: ìœ„ì¹˜ ì„ í˜¸ë„, ì˜ˆì‚° ë²”ìœ„, ì œì™¸ ì§€ì—­

### ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜
1. ì •ì  í”„ë¡œí•„ ë§¤ì¹­ (50%): ì§‘ë‹¨ ì†Œë¹„ íŒ¨í„´ ê¸°ë°˜
2. ì‹¤ì‹œê°„ í”„ë¡œí•„ ë§¤ì¹­ (50%): í˜„ì¬ ì§€ì—­ ìƒíƒœ ê¸°ë°˜
3. ìµœì¢… ì ìˆ˜ = ì •ì  ë§¤ì¹­ Ã— 0.5 + ì‹¤ì‹œê°„ ë§¤ì¹­ Ã— 0.5

### ë°ì´í„° í™œìš©
- **ì •ì  í”„ë¡œí•„**: ì—…ì¢… ì„ í˜¸ë„, ì†Œë¹„ ìˆ˜ì¤€, ì‹œê°„ëŒ€ íŒ¨í„´
- **ì‹¤ì‹œê°„ í”„ë¡œí•„**: ì¢…í•© ì ìˆ˜, íŠ¹í™” ì—…ì¢…, ìƒê¶Œ í™œì„±ë„



